file: '../../src/parse/index.js'
group: parse
suites: [conditionalsWithArithmetic]
---
### Conditionals With Arithmetic Operations
suite: conditionalsWithArithmetic
exportName: default
---
case: simple addition
in:
  - $if a + b > 10:
      result: "sum greater than 10"
out:
  type: 8
  fast: false
  properties:
    - key: "$if a + b > 10"
      value:
        type: 6
        conditions:
          - type: 4
            op: 2
            left:
              type: 4
              op: 10
              left:
                type: 1
                path: "a"
              right:
                type: 1
                path: "b"
            right:
              type: 0
              value: 10
        bodies:
          - type: 8
            fast: true
            properties:
              - key: result
                value:
                  type: 0
                  value: "sum greater than 10"
        id: null
---
case: simple subtraction
in:
  - $if a - b < 5:
      result: "difference less than 5"
out:
  type: 8
  fast: false
  properties:
    - key: "$if a - b < 5"
      value:
        type: 6
        conditions:
          - type: 4
            op: 3
            left:
              type: 4
              op: 11
              left:
                type: 1
                path: "a"
              right:
                type: 1
                path: "b"
            right:
              type: 0
              value: 5
        bodies:
          - type: 8
            fast: true
            properties:
              - key: result
                value:
                  type: 0
                  value: "difference less than 5"
        id: null
---
case: arithmetic with literals
in:
  - $if score + 10 > 100:
      achievement: "High score!"
out:
  type: 8
  fast: false
  properties:
    - key: "$if score + 10 > 100"
      value:
        type: 6
        conditions:
          - type: 4
            op: 2
            left:
              type: 4
              op: 10
              left:
                type: 1
                path: "score"
              right:
                type: 0
                value: 10
            right:
              type: 0
              value: 100
        bodies:
          - type: 8
            fast: true
            properties:
              - key: achievement
                value:
                  type: 0
                  value: "High score!"
        id: null
---
case: check if not last item using subtraction
in:
  - $if index < items.length - 1:
      hasMore: true
out:
  type: 8
  fast: false
  properties:
    - key: "$if index < items.length - 1"
      value:
        type: 6
        conditions:
          - type: 4
            op: 3
            left:
              type: 1
              path: "index"
            right:
              type: 4
              op: 11
              left:
                type: 1
                path: "items.length"
              right:
                type: 0
                value: 1
        bodies:
          - type: 8
            fast: true
            properties:
              - key: hasMore
                value:
                  type: 0
                  value: true
        id: null
---
case: chained arithmetic operations left to right
in:
  - $if a - b + c > 0:
      result: "Positive"
out:
  type: 8
  fast: false
  properties:
    - key: "$if a - b + c > 0"
      value:
        type: 6
        conditions:
          - type: 4
            op: 2
            left:
              type: 4
              op: 10
              left:
                type: 4
                op: 11
                left:
                  type: 1
                  path: "a"
                right:
                  type: 1
                  path: "b"
              right:
                type: 1
                path: "c"
            right:
              type: 0
              value: 0
        bodies:
          - type: 8
            fast: true
            properties:
              - key: result
                value:
                  type: 0
                  value: "Positive"
        id: null
---
case: arithmetic with parentheses
in:
  - $if (a + b) - c > 0:
      result: "Positive with parentheses"
out:
  type: 8
  fast: false
  properties:
    - key: "$if (a + b) - c > 0"
      value:
        type: 6
        conditions:
          - type: 4
            op: 2
            left:
              type: 4
              op: 11
              left:
                type: 4
                op: 10
                left:
                  type: 1
                  path: "a"
                right:
                  type: 1
                  path: "b"
              right:
                type: 1
                path: "c"
            right:
              type: 0
              value: 0
        bodies:
          - type: 8
            fast: true
            properties:
              - key: result
                value:
                  type: 0
                  value: "Positive with parentheses"
        id: null
---
case: arithmetic in both sides of comparison
in:
  - $if a + b == c - d:
      balanced: true
out:
  type: 8
  fast: false
  properties:
    - key: "$if a + b == c - d"
      value:
        type: 6
        conditions:
          - type: 4
            op: 0
            left:
              type: 4
              op: 10
              left:
                type: 1
                path: "a"
              right:
                type: 1
                path: "b"
            right:
              type: 4
              op: 11
              left:
                type: 1
                path: "c"
              right:
                type: 1
                path: "d"
        bodies:
          - type: 8
            fast: true
            properties:
              - key: balanced
                value:
                  type: 0
                  value: true
        id: null
---
case: arithmetic with logical operators
in:
  - $if score + bonus > 100 && lives - 1 > 0:
      status: "Continue with bonus"
out:
  type: 8
  fast: false
  properties:
    - key: "$if score + bonus > 100 && lives - 1 > 0"
      value:
        type: 6
        conditions:
          - type: 4
            op: 6
            left:
              type: 4
              op: 2
              left:
                type: 4
                op: 10
                left:
                  type: 1
                  path: "score"
                right:
                  type: 1
                  path: "bonus"
              right:
                type: 0
                value: 100
            right:
              type: 4
              op: 2
              left:
                type: 4
                op: 11
                left:
                  type: 1
                  path: "lives"
                right:
                  type: 0
                  value: 1
              right:
                type: 0
                value: 0
        bodies:
          - type: 8
            fast: true
            properties:
              - key: status
                value:
                  type: 0
                  value: "Continue with bonus"
        id: null
---
case: arithmetic in if-elif chain
in:
  - $if total - discount < 0:
      status: "Invalid"
    $elif total - discount < 50:
      status: "Low"
    $else:
      status: "Normal"
out:
  type: 8
  fast: false
  properties:
    - key: "$if total - discount < 0"
      value:
        type: 6
        conditions:
          - type: 4
            op: 3
            left:
              type: 4
              op: 11
              left:
                type: 1
                path: "total"
              right:
                type: 1
                path: "discount"
            right:
              type: 0
              value: 0
          - type: 4
            op: 3
            left:
              type: 4
              op: 11
              left:
                type: 1
                path: "total"
              right:
                type: 1
                path: "discount"
            right:
              type: 0
              value: 50
          - null
        bodies:
          - type: 8
            fast: true
            properties:
              - key: status
                value:
                  type: 0
                  value: "Invalid"
          - type: 8
            fast: true
            properties:
              - key: status
                value:
                  type: 0
                  value: "Low"
          - type: 8
            fast: true
            properties:
              - key: status
                value:
                  type: 0
                  value: "Normal"
        id: null
---
case: multiple additions and subtractions
in:
  - $if a + b - c + d - e > 0:
      result: "Complex arithmetic"
out:
  type: 8
  fast: false
  properties:
    - key: "$if a + b - c + d - e > 0"
      value:
        type: 6
        conditions:
          - type: 4
            op: 2
            left:
              type: 4
              op: 11
              left:
                type: 4
                op: 10
                left:
                  type: 4
                  op: 11
                  left:
                    type: 4
                    op: 10
                    left:
                      type: 1
                      path: "a"
                    right:
                      type: 1
                      path: "b"
                  right:
                    type: 1
                    path: "c"
                right:
                  type: 1
                  path: "d"
              right:
                type: 1
                path: "e"
            right:
              type: 0
              value: 0
        bodies:
          - type: 8
            fast: true
            properties:
              - key: result
                value:
                  type: 0
                  value: "Complex arithmetic"
        id: null